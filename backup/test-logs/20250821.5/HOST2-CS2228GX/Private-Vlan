#S_CLI_PRIVATE_VLAN_SET
TiFRONT(config)# 
private-vlan 100 primary
TiFRONT(config)# 
private-vlan 200 community
TiFRONT(config)# 
private-vlan 300 isolated
TiFRONT(config)# 
private-vlan 100 association add 200,300
TiFRONT(config)# 
interface ge17
TiFRONT(config-if-ge17)# 
switchport mode private-vlan promiscuous
TiFRONT(config-if-ge17)# 
switchport private-vlan mapping 100 add 200,300
TiFRONT(config-if-ge17)# 
interface range ge20,ge22
TiFRONT(config-if-range)# 
switchport mode private-vlan host
TiFRONT(config-if-range)# 
switchport private-vlan host-association 100 add 200
TiFRONT(config-if-range)# 
interface ge24
TiFRONT(config-if-ge24)# 
switchport mode private-vlan host
TiFRONT(config-if-ge24)# 
switchport private-vlan host-association 100 add 300
TiFRONT(config-if-ge24)# 
end
TiFRONT# 
show vlan
 ---------------------------------------------------------------------------------
  PORT            | ge                                              | xg      
                  |                   1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 |         
                  | 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 | 1 2 3 4 
 -----------------+-------------------------------------------------+-----------
  SWITCH MODE     | A A A A A A A A A A A A A A A A P A A P A P A P | A A A A 
 -----------------+-------------------------------------------------+-----------
  default  (   1) | . U U U U U U U U U U U U U U U . U . . . . . . | . U U U 
  VLAN0100 ( 100) | . . . . . . . . . . . . . . . . U . U . . . . . | . . . . 
  VLAN0200 ( 200) | . . . . . . . . . . . . . . . . . . . U U U . . | . . . . 
  VLAN0300 ( 300) | . . . . . . . . . . . . . . . . . . . . . . U U | . . . . 
  VLAN0400 ( 400) | . . . . . . . . . . . . . . . . . . . . . . . . | U . . . 
  VLAN1000 (1000) | U . . . . . . . . . . . . . . . . . . . . . . . | . . . . 
 ---------------------------------------------------------------------------------
  SWITCHPORT      : A(Access) / H(Hybrid) / T(Trunk) / P(Private-Vlan)
      A - All frame receive.
      T - Only VLAN Tagged frame receive.
      U - Only VLAN Untagged frame receive.
      U - Untagged VLAN (PVID)
      u - Untagged shared VLAN (VID)
      T - Tagged VLAN (PVID)
      t - Tagged shared VLAN (VID)
  VLANNAME ( VID) : IEEE 802.1q Port based VLAN information
TiFRONT# 
show vlan private-vlan
 PRIMARY       SECONDARY           TYPE                INTERFACES
 -------       ---------       -----------      -----------------------
     100             200         community      ge17, ge20, ge22
     100             300          isolated      ge17, ge24
TiFRONT# 
conf
Enter configuration commands, one per line.  End with CNTL/Z.
TiFRONT(config)# 
#E_CLI_PRIVATE_VLAN_SET
TiFRONT(config)# #S_SHELL_PRIVATE_VLAN_SET
bash-4.4# 
rtk_user_diag
RTK.0> 
vlan get vlan-table vid 100
Vlan 100 
  Member Ports	: 17-20,22 
  Untag Ports	: 17-20,22 
  Tag Ports	:  
  mcast group	: Not support
  Stg		: 0
  UBCAST hkey	: UC_LOOKUP_ON_VID 
  MCAST hkey	: MC_LOOKUP_ON_VID 
  VLAN GroupMask	: 0
  Profile index	: 0
RTK.0> 
vlan get vlan-table vid 200
Vlan 200 
  Member Ports	: 17-18,20-21 
  Untag Ports	: 17-18,20-21 
  Tag Ports	:  
  mcast group	: Not support
  Stg		: 0
  UBCAST hkey	: UC_LOOKUP_ON_VID 
  MCAST hkey	: MC_LOOKUP_ON_VID 
  VLAN GroupMask	: 0
  Profile index	: 0
RTK.0> 
vlan get vlan-table vid 300
Vlan 300 
  Member Ports	: 17,22-23 
  Untag Ports	: 17,22-23 
  Tag Ports	:  
  mcast group	: Not support
  Stg		: 0
  UBCAST hkey	: UC_LOOKUP_ON_VID 
  MCAST hkey	: MC_LOOKUP_ON_VID 
  VLAN GroupMask	: 0
  Profile index	: 0
RTK.0> 
port dump isolation vlan-based
Index |Lo-VID |Up-VID |Trust Port list       |State
------+-------+-------+----------------------+--------
   0  |   100 |   100 |                   17 |Enable 
Total Number Of Entries : 1
RTK.0> 
vlan get pvid inner port 18
Port based vlan configuration 
Port 18 : 200
RTK.0> 
vlan get pvid inner port 20
Port based vlan configuration 
Port 20 : 200
RTK.0> 
vlan get pvid inner port 22
Port based vlan configuration 
Port 22 : 100
RTK.0> 
vlan get pvid inner port 24
Port based vlan configuration 
Port 24 : 400
RTK.0> 
exit
RTK.0> 
bash-4.4# 
#E_SHELL_PRIVATE_VLAN_SET
bash-4.4# #S_CLI_PRIMARY_PORT_STATISTIC
TiFRONT(config)# 
interface ge18
TiFRONT(config-if-ge18)# 
shutdown
TiFRONT(config-if-ge18)# 
end
TiFRONT# 
clear port statistic
TiFRONT# 
show port-monitoring
                    Port Monitoring Table
 --------------------------------------------------------------------
   Port  |  RxRate(pps) |  RxRate(bps) |  TxRate(pps) |  TxRate(bps)
 --------+--------------+--------------+--------------+--------------
     ge1 |            0 |            0 |            0 |            0 
     ge2 |            0 |            0 |            0 |            0 
     ge3 |            0 |            0 |            0 |            0 
     ge4 |            0 |            0 |            0 |            0 
     ge5 |            0 |            0 |            0 |            0 
     ge6 |            0 |            0 |            0 |            0 
     ge7 |            0 |            0 |            0 |            0 
     ge8 |            0 |            0 |            0 |            0 
     ge9 |            0 |            0 |            0 |            0 
    ge10 |            0 |            0 |            0 |            0 
    ge11 |            0 |            0 |            0 |            0 
    ge12 |            0 |            0 |            0 |            0 
    ge13 |            0 |            0 |            0 |            0 
    ge14 |            0 |            0 |            0 |            0 
    ge15 |            0 |            0 |            0 |            0 
    ge16 |            0 |            0 |            0 |            0 
    ge17 |         2109 |      1647616 |            0 |            0 
    ge18 |            0 |            0 |            0 |            0 
    ge19 |            0 |            0 |         2110 |      1648640 
    ge20 |            0 |            0 |         2109 |      1647616 
    ge21 |            0 |            0 |            0 |            0 
    ge22 |            0 |            0 |         2110 |      1648640 
    ge23 |            0 |            0 |            0 |            0 
    ge24 |            0 |            0 |         2109 |      1648128 
     xg1 |            0 |            0 |            0 |            0 
     xg2 |            0 |            0 |            0 |            0 
     xg3 |            0 |            0 |            0 |            0 
     xg4 |            0 |            0 |            0 |            0 
 --------------------------------------------------------------------
TiFRONT# 
conf
Enter configuration commands, one per line.  End with CNTL/Z.
TiFRONT(config)# 
interface ge18
TiFRONT(config-if-ge18)# 
no shutdown
TiFRONT(config-if-ge18)# 
exit
TiFRONT(config)# 
#E_CLI_PRIMARY_PORT_STATISTIC
TiFRONT(config)# #S_NBR1_COMMON1_PORT_SET
TiFRONT(config)# 
interface ge41
TiFRONT(config-if-ge41)# 
switchport mode access
TiFRONT(config-if-ge41)# 
switchport access vlan 100
TiFRONT(config-if-ge41)# 
exit
TiFRONT(config)# 
#E_NBR1_COMMON1_PORT_SET
TiFRONT(config)# #S_CLI_COMMON1_PORT_STATISTIC
TiFRONT(config)# 
end
TiFRONT# 
clear port statistic
TiFRONT# 
show port-monitoring
                    Port Monitoring Table
 --------------------------------------------------------------------
   Port  |  RxRate(pps) |  RxRate(bps) |  TxRate(pps) |  TxRate(bps)
 --------+--------------+--------------+--------------+--------------
     ge1 |            0 |            0 |            0 |            0 
     ge2 |            0 |            0 |            0 |            0 
     ge3 |            0 |            0 |            0 |            0 
     ge4 |            0 |            0 |            0 |            0 
     ge5 |            0 |            0 |            0 |            0 
     ge6 |            0 |            0 |            0 |            0 
     ge7 |            0 |            0 |            0 |            0 
     ge8 |            0 |            0 |            0 |            0 
     ge9 |            0 |            0 |            0 |            0 
    ge10 |            0 |            0 |            0 |            0 
    ge11 |            0 |            0 |            0 |            0 
    ge12 |            0 |            0 |            0 |            0 
    ge13 |            0 |            0 |            0 |            0 
    ge14 |            0 |            0 |            0 |            0 
    ge15 |            0 |            0 |            0 |            0 
    ge16 |            0 |            0 |            0 |            0 
    ge17 |         2110 |      1648640 |         2110 |      1648640 
    ge18 |            0 |            0 |            0 |            0 
    ge19 |            0 |            0 |         2109 |      1647616 
    ge20 |         2110 |      1648640 |         2110 |      1648640 
    ge21 |            0 |            0 |         2110 |      1648640 
    ge22 |            0 |            0 |         4219 |      3297280 
    ge23 |            0 |            0 |            0 |            0 
    ge24 |            0 |            0 |         2110 |      1648640 
     xg1 |            0 |            0 |            0 |            0 
     xg2 |            0 |            0 |            0 |            0 
     xg3 |            0 |            0 |            0 |            0 
     xg4 |            0 |            0 |            0 |            0 
 --------------------------------------------------------------------
TiFRONT# 
conf
Enter configuration commands, one per line.  End with CNTL/Z.
TiFRONT(config)# 
#E_CLI_COMMON1_PORT_STATISTIC
TiFRONT(config)# #S_NBR1_COMMON2_PORT_SET
TiFRONT(config)# 
interface ge41
TiFRONT(config-if-ge41)# 
switchport mode access
TiFRONT(config-if-ge41)# 
switchport access vlan 200
TiFRONT(config-if-ge41)# 
exit
TiFRONT(config)# 
#E_NBR1_COMMON2_PORT_SET
TiFRONT(config)# #S_CLI_COMMON2_PORT_STATISTIC
TiFRONT(config)# 
end
TiFRONT# 
clear port statistic
TiFRONT# 
show port-monitoring
                    Port Monitoring Table
 --------------------------------------------------------------------
   Port  |  RxRate(pps) |  RxRate(bps) |  TxRate(pps) |  TxRate(bps)
 --------+--------------+--------------+--------------+--------------
     ge1 |            0 |            0 |            0 |            0 
     ge2 |            0 |            0 |            0 |            0 
     ge3 |            0 |            0 |            0 |            0 
     ge4 |            0 |            0 |            0 |            0 
     ge5 |            0 |            0 |            0 |            0 
     ge6 |            0 |            0 |            0 |            0 
     ge7 |            0 |            0 |            0 |            0 
     ge8 |            0 |            0 |            0 |            0 
     ge9 |            0 |            0 |            0 |            0 
    ge10 |            0 |            0 |            0 |            0 
    ge11 |            0 |            0 |            0 |            0 
    ge12 |            0 |            0 |            0 |            0 
    ge13 |            0 |            0 |            0 |            0 
    ge14 |            0 |            0 |            0 |            0 
    ge15 |            0 |            0 |            0 |            0 
    ge16 |            0 |            0 |            0 |            0 
    ge17 |         2110 |      1648640 |         2111 |      1649664 
    ge18 |            0 |            0 |            0 |            0 
    ge19 |            0 |            0 |         2111 |      1649152 
    ge20 |            0 |            0 |         4220 |      3297280 
    ge21 |            0 |            0 |         2110 |      1648640 
    ge22 |         2110 |      1648640 |         2111 |      1649152 
    ge23 |            0 |            0 |            0 |            0 
    ge24 |            0 |            0 |         2110 |      1648640 
     xg1 |            0 |            0 |            0 |            0 
     xg2 |            0 |            0 |            0 |            0 
     xg3 |            0 |            0 |            0 |            0 
     xg4 |            0 |            0 |            0 |            0 
 --------------------------------------------------------------------
TiFRONT# 
conf
Enter configuration commands, one per line.  End with CNTL/Z.
TiFRONT(config)# 
#E_CLI_COMMON2_PORT_STATISTIC
TiFRONT(config)# #S_NBR1_ISOLATED_PORT_SET
TiFRONT(config)# 
interface ge41
TiFRONT(config-if-ge41)# 
switchport mode access
TiFRONT(config-if-ge41)# 
switchport access vlan 300
TiFRONT(config-if-ge41)# 
exit
TiFRONT(config)# 
#E_NBR1_ISOLATED_PORT_SET
TiFRONT(config)# #S_CLI_ISOLATED_PORT_STATISTIC
TiFRONT(config)# 
end
TiFRONT# 
clear port statistic
TiFRONT# 
show port-monitoring
                    Port Monitoring Table
 --------------------------------------------------------------------
   Port  |  RxRate(pps) |  RxRate(bps) |  TxRate(pps) |  TxRate(bps)
 --------+--------------+--------------+--------------+--------------
     ge1 |            0 |            0 |            0 |            0 
     ge2 |            0 |            0 |            0 |            0 
     ge3 |            0 |            0 |            0 |            0 
     ge4 |            0 |            0 |            0 |            0 
     ge5 |            0 |            0 |            0 |            0 
     ge6 |            0 |            0 |            0 |            0 
     ge7 |            0 |            0 |            0 |            0 
     ge8 |            0 |            0 |            0 |            0 
     ge9 |            0 |            0 |            0 |            0 
    ge10 |            0 |            0 |            0 |            0 
    ge11 |            0 |            0 |            0 |            0 
    ge12 |            0 |            0 |            0 |            0 
    ge13 |            0 |            0 |            0 |            0 
    ge14 |            0 |            0 |            0 |            0 
    ge15 |            0 |            0 |            0 |            0 
    ge16 |            0 |            0 |            0 |            0 
    ge17 |         2110 |      1648640 |         2110 |      1648640 
    ge18 |            0 |            0 |            0 |            0 
    ge19 |            0 |            0 |         1110 |       624640 
    ge20 |            0 |            0 |         1110 |       624640 
    ge21 |            0 |            0 |            0 |            0 
    ge22 |            0 |            0 |         1110 |       624640 
    ge23 |            0 |            0 |            0 |            0 
    ge24 |         2110 |      1648640 |         2111 |      1649664 
     xg1 |            0 |            0 |            0 |            0 
     xg2 |            0 |            0 |            0 |            0 
     xg3 |            0 |            0 |            0 |            0 
     xg4 |            0 |            0 |            0 |            0 
 --------------------------------------------------------------------
TiFRONT# 
conf
Enter configuration commands, one per line.  End with CNTL/Z.
TiFRONT(config)# 
#E_CLI_ISOLATED_PORT_STATISTIC
TiFRONT(config)# #S_NBR1_PRIVATE_VLAN_UNSET
TiFRONT(config)# 
interface ge41
TiFRONT(config-if-ge41)# 
no switchport access vlan
TiFRONT(config-if-ge41)# 
exit
TiFRONT(config)# 
#E_NBR1_PRIVATE_VLAN_UNSET
TiFRONT(config)# #S_CLI_PRIVATE_VLAN_UNSET
TiFRONT(config)# 
interface ge17
TiFRONT(config-if-ge17)# 
no switchport mode private-vlan promiscuous
TiFRONT(config-if-ge17)# 
no switchport access vlan
TiFRONT(config-if-ge17)# 
interface range ge20,ge22
TiFRONT(config-if-range)# 
no switchport mode private-vlan host
TiFRONT(config-if-range)# 
interface ge20
TiFRONT(config-if-ge20)# 
switchport access vlan 100
TiFRONT(config-if-ge20)# 
interface ge22
TiFRONT(config-if-ge22)# 
switchport access vlan 200
TiFRONT(config-if-ge22)# 
interface ge24
TiFRONT(config-if-ge24)# 
no switchport mode private-vlan host
TiFRONT(config-if-ge24)# 
switchport access vlan 300
TiFRONT(config-if-ge24)# 
exit
TiFRONT(config)# 
no private-vlan 200 community
TiFRONT(config)# 
no private-vlan 300 isolated
TiFRONT(config)# 
no private-vlan 100 primary
TiFRONT(config)# 
end
TiFRONT# 
show vlan
 ---------------------------------------------------------------------------------
  PORT            | ge                                              | xg      
                  |                   1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 |         
                  | 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 | 1 2 3 4 
 -----------------+-------------------------------------------------+-----------
  SWITCH MODE     | A A A A A A A A A A A A A A A A A A A A A A A A | A A A A 
 -----------------+-------------------------------------------------+-----------
  default  (   1) | . U U U U U U U U U U U U U U U U U . . . . . . | . U U U 
  VLAN0100 ( 100) | . . . . . . . . . . . . . . . . . . U U . . . . | . . . . 
  VLAN0200 ( 200) | . . . . . . . . . . . . . . . . . . . . U U . . | . . . . 
  VLAN0300 ( 300) | . . . . . . . . . . . . . . . . . . . . . . U U | . . . . 
  VLAN0400 ( 400) | . . . . . . . . . . . . . . . . . . . . . . . . | U . . . 
  VLAN1000 (1000) | U . . . . . . . . . . . . . . . . . . . . . . . | . . . . 
 ---------------------------------------------------------------------------------
  SWITCHPORT      : A(Access) / H(Hybrid) / T(Trunk) / P(Private-Vlan)
      A - All frame receive.
      T - Only VLAN Tagged frame receive.
      U - Only VLAN Untagged frame receive.
      U - Untagged VLAN (PVID)
      u - Untagged shared VLAN (VID)
      T - Tagged VLAN (PVID)
      t - Tagged shared VLAN (VID)
  VLANNAME ( VID) : IEEE 802.1q Port based VLAN information
TiFRONT# 
show vlan private-vlan
 PRIMARY       SECONDARY           TYPE                INTERFACES
 -------       ---------       -----------      -----------------------
TiFRONT# 
conf
Enter configuration commands, one per line.  End with CNTL/Z.
TiFRONT(config)# 
#E_CLI_PRIVATE_VLAN_UNSET
TiFRONT(config)# #S_SHELL_PRIVATE_VLAN_UNSET
bash-4.4# 
rtk_user_diag
RTK.0> 
vlan get vlan-table vid 100
Vlan 100 
  Member Ports	: 18-19 
  Untag Ports	: 18-19 
  Tag Ports	:  
  mcast group	: Not support
  Stg		: 0
  UBCAST hkey	: UC_LOOKUP_ON_VID 
  MCAST hkey	: MC_LOOKUP_ON_VID 
  VLAN GroupMask	: 0
  Profile index	: 0
RTK.0> 
vlan get vlan-table vid 200
Vlan 200 
  Member Ports	: 20-21 
  Untag Ports	: 20-21 
  Tag Ports	:  
  mcast group	: Not support
  Stg		: 0
  UBCAST hkey	: UC_LOOKUP_ON_VID 
  MCAST hkey	: MC_LOOKUP_ON_VID 
  VLAN GroupMask	: 0
  Profile index	: 0
RTK.0> 
vlan get vlan-table vid 300
Vlan 300 
  Member Ports	: 22-23 
  Untag Ports	: 22-23 
  Tag Ports	:  
  mcast group	: Not support
  Stg		: 0
  UBCAST hkey	: UC_LOOKUP_ON_VID 
  MCAST hkey	: MC_LOOKUP_ON_VID 
  VLAN GroupMask	: 0
  Profile index	: 0
RTK.0> 
port dump isolation vlan-based
Index |Lo-VID |Up-VID |Trust Port list       |State
------+-------+-------+----------------------+--------
Total Number Of Entries : 0
RTK.0> 
vlan get pvid inner port 18
Port based vlan configuration 
Port 18 : 100
RTK.0> 
vlan get pvid inner port 20
Port based vlan configuration 
Port 20 : 200
RTK.0> 
vlan get pvid inner port 22
Port based vlan configuration 
Port 22 : 300
RTK.0> 
vlan get pvid inner port 24
Port based vlan configuration 
Port 24 : 400
RTK.0> 
exit
RTK.0> 
bash-4.4# 
#E_SHELL_PRIVATE_VLAN_UNSET
bash-4.4# 